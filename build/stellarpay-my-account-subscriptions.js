(()=>{"use strict";var t={n:e=>{var a=e&&e.__esModule?()=>e.default:()=>e;return t.d(a,{a}),a},d:(e,a)=>{for(var n in a)t.o(a,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:a[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};const e=window.wp.i18n,a=window.wp.apiFetch;var n=t.n(a);const r=window.wp.url;document.addEventListener("DOMContentLoaded",(function(){jQuery(document.body).on("click",".stellarpay-subscriptions__cancel-button",(function(t){if(t.preventDefault(),!window.confirm((0,e.__)("Are you sure you want to cancel this subscription?","stellarpay")))return;const a=jQuery(this).attr("href");window.location.assign(a)})),jQuery(".stellarpay-subscriptions__status-badge--is-loading").each(((t,a)=>{const s=jQuery(a),i=s.data("subscription-id"),o=s.data("order-id");i&&o?async function(t,e){for(let a=0;a<3;a++)try{const a=await n()({path:(0,r.addQueryArgs)(`${stellarPaySubscriptions.apiRoute}`,{id:parseInt(t),orderId:parseInt(e)})});if("pending"===a?.status||!a?.statusBadgeElement)throw new Error;return a}catch(t){if(!(a<2))throw new Error;await new Promise((t=>setTimeout(t,1e3)))}}(i,o).then((t=>{s.parents("tr").find(".stellarpay-subscriptions__next-payment").text(t?.nextBillingAt),s.parent(".stellarpay-subscriptions__status-badge").replaceWith(t?.statusBadgeElement)})).catch((()=>{s.parent(".stellarpay-subscriptions__status-badge").text((0,e.__)("Activation pending","stellarpay"))})):s.parent(".stellarpay-subscriptions__status-badge").text((0,e.__)("Status not found","stellarpay"))}))}))})();