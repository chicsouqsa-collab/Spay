(()=>{var e={1020:(e,t,r)=>{"use strict";var n=r(1609),o=Symbol.for("react.element"),a=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,c=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,r){var n,a={},u=null,l=null;for(n in void 0!==r&&(u=""+r),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(l=t.ref),t)i.call(t,n)&&!s.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===a[n]&&(a[n]=t[n]);return{$$typeof:o,type:e,key:u,ref:l,props:a,_owner:c.current}}t.Fragment=a,t.jsx=u,t.jsxs=u},1609:e=>{"use strict";e.exports=window.React},2926:function(e,t,r){!function(e,t){"use strict";function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,a=[],_n=!0,i=!1;try{for(r=r.call(e);!(_n=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);_n=!0);}catch(e){i=!0,o=e}finally{try{_n||null==r.return||r.return()}finally{if(i)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var l,p,d,f,m={exports:{}};m.exports=function(){if(f)return d;f=1;var e=p?l:(p=1,l="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");function t(){}function r(){}return r.resetWarningCache=t,d=function(){function n(t,r,n,o,a,i){if(i!==e){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function o(){return n}n.isRequired=n;var a={array:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:o,element:n,elementType:n,instanceOf:o,node:n,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:r,resetWarningCache:t};return a.PropTypes=a,a}}()();var h=u(m.exports),y=function(e,r,n){var o=!!n,a=t.useRef(n);t.useEffect((function(){a.current=n}),[n]),t.useEffect((function(){if(!o||!e)return function(){};var t=function(){a.current&&a.current.apply(a,arguments)};return e.on(r,t),function(){e.off(r,t)}}),[o,r,e,a])},g=function(e){var r=t.useRef(e);return t.useEffect((function(){r.current=e}),[e]),r.current},b=function(e){return null!==e&&"object"===o(e)},v="[object Object]",C=function e(t,r){if(!b(t)||!b(r))return t===r;var n=Array.isArray(t);if(n!==Array.isArray(r))return!1;var o=Object.prototype.toString.call(t)===v;if(o!==(Object.prototype.toString.call(r)===v))return!1;if(!o&&!n)return t===r;var a=Object.keys(t),i=Object.keys(r);if(a.length!==i.length)return!1;for(var c={},s=0;s<a.length;s+=1)c[a[s]]=!0;for(var u=0;u<i.length;u+=1)c[i[u]]=!0;var l=Object.keys(c);if(l.length!==a.length)return!1;var p=t,d=r;return l.every((function(t){return e(p[t],d[t])}))},E=function(e,t,r){return b(e)?Object.keys(e).reduce((function(o,i){var c=!b(t)||!C(e[i],t[i]);return r.includes(i)?(c&&console.warn("Unsupported prop change: options.".concat(i," is not a mutable property.")),o):c?n(n({},o||{}),{},a({},i,e[i])):o}),null):null},_="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",k=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_;if(null===e||b(t=e)&&"function"==typeof t.elements&&"function"==typeof t.createToken&&"function"==typeof t.createPaymentMethod&&"function"==typeof t.confirmCardPayment)return e;throw new Error(r)},w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_;if(function(e){return b(e)&&"function"==typeof e.then}(e))return{tag:"async",stripePromise:Promise.resolve(e).then((function(e){return k(e,t)}))};var r=k(e,t);return null===r?{tag:"empty"}:{tag:"sync",stripe:r}},x=function(e){e&&e._registerWrapper&&e.registerAppInfo&&(e._registerWrapper({name:"react-stripe-js",version:"2.8.1"}),e.registerAppInfo({name:"react-stripe-js",version:"2.8.1",url:"https://stripe.com/docs/stripe-js/react"}))},S=t.createContext(null);S.displayName="ElementsContext";var P=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},T=function(e){var r=e.stripe,n=e.options,o=e.children,a=t.useMemo((function(){return w(r)}),[r]),i=c(t.useState((function(){return{stripe:"sync"===a.tag?a.stripe:null,elements:"sync"===a.tag?a.stripe.elements(n):null}})),2),s=i[0],u=i[1];t.useEffect((function(){var e=!0,t=function(e){u((function(t){return t.stripe?t:{stripe:e,elements:e.elements(n)}}))};return"async"!==a.tag||s.stripe?"sync"!==a.tag||s.stripe||t(a.stripe):a.stripePromise.then((function(r){r&&e&&t(r)})),function(){e=!1}}),[a,s,n]);var l=g(r);t.useEffect((function(){null!==l&&l!==r&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")}),[l,r]);var p=g(n);return t.useEffect((function(){if(s.elements){var e=E(n,p,["clientSecret","fonts"]);e&&s.elements.update(e)}}),[n,p,s.elements]),t.useEffect((function(){x(s.stripe)}),[s.stripe]),t.createElement(S.Provider,{value:s},o)};T.propTypes={stripe:h.any,options:h.object};var O=function(e){var r=t.useContext(S);return P(r,e)},j=function(e){return(0,e.children)(O("mounts <ElementsConsumer>"))};j.propTypes={children:h.func.isRequired};var A=["on","session"],M=t.createContext(null);M.displayName="CustomCheckoutSdkContext";var R=function(e,t){if(!e)throw new Error("Could not find CustomCheckoutProvider context; You need to wrap the part of your app that ".concat(t," in an <CustomCheckoutProvider> provider."));return e},I=t.createContext(null);I.displayName="CustomCheckoutContext";var D=function(e){var r=e.stripe,o=e.options,a=e.children,s=t.useMemo((function(){return w(r,"Invalid prop `stripe` supplied to `CustomCheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.")}),[r]),u=c(t.useState(null),2),l=u[0],p=u[1],d=c(t.useState((function(){return{stripe:"sync"===s.tag?s.stripe:null,customCheckoutSdk:null}})),2),f=d[0],m=d[1],h=function(e,t){m((function(r){return r.stripe&&r.customCheckoutSdk?r:{stripe:e,customCheckoutSdk:t}}))},y=t.useRef(!1);t.useEffect((function(){var e=!0;return"async"!==s.tag||f.stripe?"sync"===s.tag&&s.stripe&&!y.current&&(y.current=!0,s.stripe.initCustomCheckout(o).then((function(e){e&&(h(s.stripe,e),e.on("change",p))}))):s.stripePromise.then((function(t){t&&e&&!y.current&&(y.current=!0,t.initCustomCheckout(o).then((function(e){e&&(h(t,e),e.on("change",p))})))})),function(){e=!1}}),[s,f,o,p]);var v=g(r);t.useEffect((function(){null!==v&&v!==r&&console.warn("Unsupported prop change on CustomCheckoutProvider: You cannot change the `stripe` prop after setting it.")}),[v,r]);var E=g(o);t.useEffect((function(){var e,t;if(f.customCheckoutSdk){!o.clientSecret||b(E)||C(o.clientSecret,E.clientSecret)||console.warn("Unsupported prop change: options.client_secret is not a mutable property.");var r=null==E||null===(e=E.elementsOptions)||void 0===e?void 0:e.appearance,n=null==o||null===(t=o.elementsOptions)||void 0===t?void 0:t.appearance;n&&!C(n,r)&&f.customCheckoutSdk.changeAppearance(n)}}),[o,E,f.customCheckoutSdk]),t.useEffect((function(){x(f.stripe)}),[f.stripe]);var _=t.useMemo((function(){return e=f.customCheckoutSdk,t=l,e?(e.on,e.session,n(n({},i(e,A)),t||e.session())):null;var e,t}),[f.customCheckoutSdk,l]);return f.customCheckoutSdk?t.createElement(M.Provider,{value:f},t.createElement(I.Provider,{value:_},a)):null};D.propTypes={stripe:h.any,options:h.shape({clientSecret:h.string.isRequired,elementsOptions:h.object}).isRequired};var N=function(e){var r=t.useContext(M),n=t.useContext(S);if(r&&n)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CustomCheckoutProvider> and <Elements> providers."));return r?R(r,e):P(n,e)},L=function(e,r){var n,o="".concat((n=e).charAt(0).toUpperCase()+n.slice(1),"Element"),a=r?function(e){N("mounts <".concat(o,">"));var r=e.id,n=e.className;return t.createElement("div",{id:r,className:n})}:function(r){var n,a=r.id,i=r.className,s=r.options,u=void 0===s?{}:s,l=r.onBlur,p=r.onFocus,d=r.onReady,f=r.onChange,m=r.onEscape,h=r.onClick,b=r.onLoadError,v=r.onLoaderStart,C=r.onNetworksChange,_=r.onConfirm,k=r.onCancel,w=r.onShippingAddressChange,x=r.onShippingRateChange,S=N("mounts <".concat(o,">")),P="elements"in S?S.elements:null,T="customCheckoutSdk"in S?S.customCheckoutSdk:null,O=c(t.useState(null),2),j=O[0],A=O[1],M=t.useRef(null),R=t.useRef(null);y(j,"blur",l),y(j,"focus",p),y(j,"escape",m),y(j,"click",h),y(j,"loaderror",b),y(j,"loaderstart",v),y(j,"networkschange",C),y(j,"confirm",_),y(j,"cancel",k),y(j,"shippingaddresschange",w),y(j,"shippingratechange",x),y(j,"change",f),d&&(n="expressCheckout"===e?d:function(){d(j)}),y(j,"ready",n),t.useLayoutEffect((function(){if(null===M.current&&null!==R.current&&(P||T)){var t=null;T?t=T.createElement(e,u):P&&(t=P.create(e,u)),M.current=t,A(t),t&&t.mount(R.current)}}),[P,T,u]);var I=g(u);return t.useEffect((function(){if(M.current){var e=E(u,I,["paymentRequest"]);e&&"update"in M.current&&M.current.update(e)}}),[u,I]),t.useLayoutEffect((function(){return function(){if(M.current&&"function"==typeof M.current.destroy)try{M.current.destroy(),M.current=null}catch(e){}}}),[]),t.createElement("div",{id:a,className:i,ref:R})};return a.propTypes={id:h.string,className:h.string,onChange:h.func,onBlur:h.func,onFocus:h.func,onReady:h.func,onEscape:h.func,onClick:h.func,onLoadError:h.func,onLoaderStart:h.func,onNetworksChange:h.func,onConfirm:h.func,onCancel:h.func,onShippingAddressChange:h.func,onShippingRateChange:h.func,options:h.object},a.displayName=o,a.__elementType=e,a},B="undefined"==typeof window,U=t.createContext(null);U.displayName="EmbeddedCheckoutProviderContext";var Y=function(){var e=t.useContext(U);if(!e)throw new Error("<EmbeddedCheckout> must be used within <EmbeddedCheckoutProvider>");return e},H=B?function(e){var r=e.id,n=e.className;return Y(),t.createElement("div",{id:r,className:n})}:function(e){var r=e.id,n=e.className,o=Y().embeddedCheckout,a=t.useRef(!1),i=t.useRef(null);return t.useLayoutEffect((function(){return!a.current&&o&&null!==i.current&&(o.mount(i.current),a.current=!0),function(){if(a.current&&o)try{o.unmount(),a.current=!1}catch(e){}}}),[o]),t.createElement("div",{ref:i,id:r,className:n})},F=L("auBankAccount",B),Q=L("card",B),$=L("cardNumber",B),K=L("cardExpiry",B),W=L("cardCvc",B),q=L("fpxBank",B),V=L("iban",B),z=L("idealBank",B),G=L("p24Bank",B),Z=L("epsBank",B),J=L("payment",B),X=L("expressCheckout",B),ee=L("currencySelector",B),te=L("paymentRequestButton",B),re=L("linkAuthentication",B),ne=L("address",B),oe=L("shippingAddress",B),ae=L("paymentMethodMessaging",B),ie=L("affirmMessage",B),ce=L("afterpayClearpayMessage",B);e.AddressElement=ne,e.AffirmMessageElement=ie,e.AfterpayClearpayMessageElement=ce,e.AuBankAccountElement=F,e.CardCvcElement=W,e.CardElement=Q,e.CardExpiryElement=K,e.CardNumberElement=$,e.CurrencySelectorElement=ee,e.CustomCheckoutProvider=D,e.Elements=T,e.ElementsConsumer=j,e.EmbeddedCheckout=H,e.EmbeddedCheckoutProvider=function(e){var r=e.stripe,n=e.options,o=e.children,a=t.useMemo((function(){return w(r,"Invalid prop `stripe` supplied to `EmbeddedCheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.")}),[r]),i=t.useRef(null),s=t.useRef(null),u=c(t.useState({embeddedCheckout:null}),2),l=u[0],p=u[1];t.useEffect((function(){if(!s.current&&!i.current){var e=function(e){s.current||i.current||(s.current=e,i.current=s.current.initEmbeddedCheckout(n).then((function(e){p({embeddedCheckout:e})})))};"async"!==a.tag||s.current||!n.clientSecret&&!n.fetchClientSecret?"sync"!==a.tag||s.current||!n.clientSecret&&!n.fetchClientSecret||e(a.stripe):a.stripePromise.then((function(t){t&&e(t)}))}}),[a,n,l,s]),t.useEffect((function(){return function(){l.embeddedCheckout?(i.current=null,l.embeddedCheckout.destroy()):i.current&&i.current.then((function(){i.current=null,l.embeddedCheckout&&l.embeddedCheckout.destroy()}))}}),[l.embeddedCheckout]),t.useEffect((function(){x(s)}),[s]);var d=g(r);t.useEffect((function(){null!==d&&d!==r&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the `stripe` prop after setting it.")}),[d,r]);var f=g(n);return t.useEffect((function(){null!=f&&(null!=n?(void 0===n.clientSecret&&void 0===n.fetchClientSecret&&console.warn("Invalid props passed to EmbeddedCheckoutProvider: You must provide one of either `options.fetchClientSecret` or `options.clientSecret`."),null!=f.clientSecret&&n.clientSecret!==f.clientSecret&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the client secret after setting it. Unmount and create a new instance of EmbeddedCheckoutProvider instead."),null!=f.fetchClientSecret&&n.fetchClientSecret!==f.fetchClientSecret&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change fetchClientSecret after setting it. Unmount and create a new instance of EmbeddedCheckoutProvider instead."),null!=f.onComplete&&n.onComplete!==f.onComplete&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onComplete option after setting it."),null!=f.onShippingDetailsChange&&n.onShippingDetailsChange!==f.onShippingDetailsChange&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onShippingDetailsChange option after setting it."),null!=f.onLineItemsChange&&n.onLineItemsChange!==f.onLineItemsChange&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onLineItemsChange option after setting it.")):console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot unset options after setting them."))}),[f,n]),t.createElement(U.Provider,{value:l},o)},e.EpsBankElement=Z,e.ExpressCheckoutElement=X,e.FpxBankElement=q,e.IbanElement=V,e.IdealBankElement=z,e.LinkAuthenticationElement=re,e.P24BankElement=G,e.PaymentElement=J,e.PaymentMethodMessagingElement=ae,e.PaymentRequestButtonElement=te,e.ShippingAddressElement=oe,e.useCustomCheckout=function(){!function(e){var r=t.useContext(M);R(r,e)}("calls useCustomCheckout()");var e=t.useContext(I);if(!e)throw new Error("Could not find CustomCheckout Context; You need to wrap the part of your app that calls useCustomCheckout() in an <CustomCheckoutProvider> provider.");return e},e.useElements=function(){return O("calls useElements()").elements},e.useStripe=function(){return N("calls useStripe()").stripe}}(t,r(1609))},4848:(e,t,r)=>{"use strict";e.exports=r(1020)}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,r),a.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e="stellarpay-stripe",t=`wc-${e}-payment-method-id`,n={CHECKOUT_FORM:"form.woocommerce-checkout",PAYMENT_METHOD_ID:`input[name="${t}"]`,SELECTED_PAYMENT_METHOD:'input[name="payment_method"]:checked',SELECTED_PAYMENT_METHOD_TOKEN:`input[name="wc-${e}-payment-token"]:checked`,PAYMENT_METHOD_CONTAINER:`#wc-${e}-element`},o={CHECKOUT_PLACE_ORDER:`checkout_place_order_${e}`,CHECKOUT_PLACE_ORDER_SUCCESS:"checkout_place_order_success"},a=window.lodash;var i,c="https://js.stripe.com/v3",s=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,u="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",l=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",r=document.createElement("script");r.src="".concat(c).concat(t);var n=document.head||document.body;if(!n)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(r),r},p=null,d=null,f=null,m=!1,h=function(){return i||(i=(e=null,null!==p?p:(p=new Promise((function(t,r){if("undefined"!=typeof window&&"undefined"!=typeof document)if(window.Stripe&&e&&console.warn(u),window.Stripe)t(window.Stripe);else try{var n=function(){for(var e=document.querySelectorAll('script[src^="'.concat(c,'"]')),t=0;t<e.length;t++){var r=e[t];if(s.test(r.src))return r}return null}();if(n&&e)console.warn(u);else if(n){if(n&&null!==f&&null!==d){var o;n.removeEventListener("load",f),n.removeEventListener("error",d),null===(o=n.parentNode)||void 0===o||o.removeChild(n),n=l(e)}}else n=l(e);f=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}}(t,r),d=function(e){return function(){e(new Error("Failed to load Stripe.js"))}}(r),n.addEventListener("load",f),n.addEventListener("error",d)}catch(e){return void r(e)}else t(null)}))).catch((function(e){return p=null,Promise.reject(e)}))).catch((function(e){return i=null,Promise.reject(e)})));var e};Promise.resolve().then((function(){return h()})).catch((function(e){m||console.warn(e)}));const y=window.wp.i18n;var g=r(4848),b=r(2926);const v=window.wp.element,C=window.wp.url,E=(e,t)=>{const r=document.createTextNode(t).nodeValue,n=(e=>{const t=document.createElement("div");t.className="wc-block-components-notice-banner is-error",t.setAttribute("role","alert");const r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("viewBox","0 0 24 24"),r.setAttribute("width","24"),r.setAttribute("height","24"),r.setAttribute("aria-hidden","true"),r.setAttribute("focusable","false");const n=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("d","M12 3.2c-4.8 0-8.8 3.9-8.8 8.8 0 4.8 3.9 8.8 8.8 8.8 4.8 0 8.8-3.9 8.8-8.8 0-4.8-4-8.8-8.8-8.8zm0 16c-4 0-7.2-3.3-7.2-7.2C4.8 8 8 4.8 12 4.8s7.2 3.3 7.2 7.2c0 4-3.2 7.2-7.2 7.2zM11 17h2v-6h-2v6zm0-8h2V7h-2v2z"),r.appendChild(n),t.appendChild(r);const o=document.createElement("div");return o.className="wc-block-components-notice-banner__content",o.textContent=e,t.appendChild(o),t})(r);k(),e.get(0).insertBefore(n,e.get(0).firstChild),e.removeClass("processing").unblock();const o=e.find(".input-text, select, input:checkbox");o.length&&o.trigger("validate").trigger("blur"),_(e),jQuery(document.body).trigger("checkout_error",[r])},_=e=>{let t=jQuery(".woocommerce-NoticeGroup-updateOrderReview, .woocommerce-NoticeGroup-checkout");t.length||(t=e),jQuery.scroll_to_notices(t)},k=()=>{jQuery(".woocommerce-NoticeGroup-checkout, .woocommerce-error, .woocommerce-message, .wc-block-components-notice-banner.is-error").remove()},w=t=>t.find(n.SELECTED_PAYMENT_METHOD).val()===e,x=e=>{const t=e.find(n.SELECTED_PAYMENT_METHOD_TOKEN);return t.length>0&&Number.isInteger(Math.abs(t.val()))},S=()=>"true"===new URLSearchParams(location.search).get("pay_for_order"),P=()=>{const e=document.querySelector(n.PAYMENT_METHOD_CONTAINER);return void 0!==stellarPayStripeData.previousRoot&&(stellarPayStripeData.previousRoot.unmount(),delete stellarPayStripeData.previousRoot),e},T=(e,t)=>{const r=e.find('button[name="woocommerce_checkout_place_order"]');r.length&&(r.get(0).disabled=t)},O=e=>{const t=j(e,"email"),r=j(e,"first_name"),n=j(e,"last_name"),o=j(e,"phone"),i=(0,a.isEmpty)(r)?"":`${r} ${n}`.trim(),c=j(e,"country");let s={line1:j(e,"address_1"),line2:j(e,"address_2"),city:j(e,"city"),state:j(e,"state"),country:c,postal_code:j(e,"postcode")};s=(0,a.omitBy)(s,(e=>(0,a.isEmpty)(e)));let u={name:i,email:t,phone:o};return u=(0,a.omitBy)(u,(e=>(0,a.isEmpty)(e))),(0,a.isEmpty)(s)||(u={...u,address:s}),u},j=(e,t)=>{const r=e.find(`[name="billing_${t}"]`);var n;return r.length?r.val():null!==(n=stellarPayStripeData?.customer?.billing?.[t])&&void 0!==n?n:""},A=window.wp.apiFetch;var M=r.n(A);const R=({form:e})=>{const r=(0,b.useStripe)(),n=(0,b.useElements)();(0,v.useEffect)((()=>{const n=jQuery(`input[name="${t}"]`);return e.on(o.CHECKOUT_PLACE_ORDER_SUCCESS,((t,o)=>{if(!w(e))return o;const{clientSecret:a,redirect:i,paymentMethodId:c,order_id:s,subscriptionWithZeroOrderValue:u}=o,l={clientSecret:a,confirmParams:{return_url:i,payment_method:c}};if(!0===u)return!0;const p=n.val(),d={scroll_to_notices:jQuery.scroll_to_notices,fn:{prepend:jQuery.fn.prepend,removeClass:jQuery.fn.removeClass,unblock:jQuery.fn.unblock}};r.confirmPayment(l).then((async t=>{const{error:r}=t,{type:n,message:o}=r;for(const e in d)if("fn"!==e)jQuery[e]=d[e];else for(const t in d[e])jQuery.fn[t]=d[e][t];if(["card_error"].includes(n)&&c===p&&!x(e))try{const e=r?.payment_intent?.id;await(async(e,t,r)=>{const n={path:"/stellarpay/v1/detach-stripe-customer-payment-method/",method:"POST",data:{"order-id":e,"payment-method-id":t,"payment-intent-id":r}};return await M()(n)})(s,c,e)}catch(e){}e.removeClass("processing").unblock(),E(e,o)}));for(const e in d)if("fn"!==e)jQuery[e]=function(){return this};else for(const t in d[e])jQuery.fn[t]=function(){return this};return!1})),()=>{e.off(o.CHECKOUT_PLACE_ORDER_SUCCESS)}}),[r,n,e])},I=({form:e})=>((({form:e})=>{const r=(0,b.useStripe)(),a=(0,b.useElements)();(0,v.useEffect)((()=>{const i=jQuery(`input[name="${t}"]`);return e.on(o.CHECKOUT_PLACE_ORDER,(()=>!!(()=>{const t=i.val(),r=t&&-1!==t.indexOf("pm_"),o=e.find(n.SELECTED_PAYMENT_METHOD_TOKEN),a=o.length>0&&Number.isInteger(Math.abs(o.val()));return r||a})()||((async e=>{const{billing:t,stripe:r,elements:n,$form:o}=e;if(!r||!n)return E(o,(0,y.__)("An error occurred during the setup of payment options. Please try again. If the issue persists, kindly contact the website administrator for assistance.","stellarpay")),null;const a=await n.submit(),{error:i}=a;if(i)return E(o,i.message),null;try{const e=await r.createPaymentMethod({elements:n,params:{billing_details:{email:t.email,name:t.name,phone:t.phone}}}),{error:a}=e;if(a)return E(o,a.message),null;const{id:i}=e.paymentMethod;return i}catch(e){return E(o,e.message),null}})({stripe:r,elements:a,billing:O(e),$form:e}).then((t=>{null!==t&&(i.val(t),e.trigger("submit"))})),!1))),()=>{e.off(o.CHECKOUT_PLACE_ORDER)}}),[r,a,e])})({form:e}),R({form:e}),null),D={theme:"stripe",variables:{colorPrimary:"#0570de",colorBackground:"#ffffff",colorText:"#30313d"},rules:{".AccordionItem":{backgroundColor:"#ffffff",borderColor:"#e6e6e6"}}},N={defaultTheme:D,flatTheme:{theme:"flat",variables:{colorPrimary:"#007aff",colorBackground:"#f1f1f1",colorText:"#30313d"},rules:{".AccordionItem":{borderColor:"#f1f1f1"}}},nightTheme:{theme:"night",labels:"floating",variables:{colorPrimary:"#85d996",colorBackground:"#30313d",colorText:"#ffffff"},rules:{".AccordionItem":{backgroundColor:"#30313d",borderColor:"#424353"}}},minimalTheme:{theme:"flat",variables:{fontFamily:' "Gill Sans", sans-serif',fontLineHeight:"1.5",borderRadius:"10px",colorPrimary:"#007aff",colorBackground:"#F6F8FA",colorText:"#30313d",accessibleColorOnColorPrimary:"#262626"},rules:{".Block":{backgroundColor:"var(--colorBackground)",boxShadow:"none",padding:"12px"},".Input":{padding:"12px"},".Input:disabled, .Input--invalid:disabled":{color:"lightgray"},".Tab":{padding:"10px 12px 8px 12px",border:"none"},".Tab:hover":{border:"none",boxShadow:"0px 1px 1px rgba(0, 0, 0, 0.03), 0px 3px 7px rgba(18, 42, 66, 0.04)"},".Tab--selected, .Tab--selected:focus, .Tab--selected:hover":{border:"none",backgroundColor:"#fff",boxShadow:"0 0 0 1.5px var(--colorPrimaryText), 0px 1px 1px rgba(0, 0, 0, 0.03), 0px 3px 7px rgba(18, 42, 66, 0.04)"},".Label":{fontWeight:"500"},".AccordionItem":{borderColor:"#f6f8fa"}}},bubblegumTheme:{theme:"stripe",variables:{fontWeightNormal:"500",borderRadius:"2px",colorPrimary:"#f360a6",colorBackground:"#ffffff",colorText:"#30313d",tabIconSelectedColor:"#fff",gridRowSpacing:"16px"},rules:{".Tab, .Input, .Block, .CheckboxInput, .CodeInput":{boxShadow:"0px 3px 10px rgba(18, 42, 66, 0.08)"},".Block":{borderColor:"transparent"},".BlockDivider":{backgroundColor:"#ebebeb"},".Tab, .Tab:hover, .Tab:focus":{border:"0"},".Tab--selected, .Tab--selected:hover":{backgroundColor:"#f360a6",color:"#fff"},".AccordionItem":{backgroundColor:"#ffffff",borderColor:"#e6e6e6"}}},ninetyFiveTheme:{theme:"flat",variables:{fontFamily:"Verdana",fontLineHeight:"1.5",borderRadius:"0",colorPrimary:"#007aff",colorBackground:"#ffffff",colorText:"##30313d",focusBoxShadow:"none",focusOutline:"-webkit-focus-ring-color auto 1px",tabIconSelectedColor:"var(--colorText)"},rules:{".Input, .CheckboxInput, .CodeInput":{transition:"none",boxShadow:"inset -1px -1px #ffffff, inset 1px 1px #0a0a0a, inset -2px -2px #dfdfdf, inset 2px 2px #808080"},".Input":{padding:"12px"},".Input--invalid":{color:"#DF1B41"},".Tab, .Block, .PickerItem--selected":{backgroundColor:"#dfdfdf",boxShadow:"inset -1px -1px #0a0a0a, inset 1px 1px #ffffff, inset -2px -2px #808080, inset 2px 2px #dfdfdf"},".Tab":{transition:"none"},".Tab:hover":{backgroundColor:"#eee"},".Tab--selected, .Tab--selected:focus, .Tab--selected:hover":{color:"var(--colorText)",backgroundColor:"#ccc"},".Tab:focus, .Tab--selected:focus":{boxShadow:"inset -1px -1px #0a0a0a, inset 1px 1px #ffffff, inset -2px -2px #808080, inset 2px 2px #dfdfdf",outline:"none"},".Tab:focus-visible":{outline:"var(--focusOutline)"},".PickerItem":{backgroundColor:"#dfdfdf",boxShadow:"inset -1px -1px #0a0a0a, inset 1px 1px #ffffff, inset -2px -2px #808080, inset 2px 2px #dfdfdf",transition:"none"},".PickerItem:hover":{backgroundColor:"#eee"},".PickerItem--highlight":{outline:"1px solid blue"},".PickerItem--selected:hover":{backgroundColor:"#dfdfdf"},".AccordionItem":{borderColor:"#ffffff"}}},darkBlueTheme:{theme:"night",variables:{fontFamily:"Sohne, system-ui, sans-serif",fontWeightNormal:"500",borderRadius:"8px",colorBackground:"#212D63",colorPrimary:"#EFC078",accessibleColorOnColorPrimary:"#1A1B25",colorText:"#ffffff",colorTextSecondary:"white",colorTextPlaceholder:"#ABB2BF",tabIconColor:"white",logoColor:"dark"},rules:{".Input":{backgroundColor:"var(--colorBackground)",border:"1px solid var(--colorPrimary)"},".AccordionItem":{backgroundColor:"#0A2540",borderColor:"#123b64"}}}},L={custom:(0,y.__)("Custom","stellarpay"),stripe:(0,y.__)("Default","stellarpay"),flat:(0,y.__)("Flat","stellarpay"),night:(0,y.__)("Dark","stellarpay"),minimal:(0,y.__)("Minimal","stellarpay"),bubblegum:(0,y.__)("Bubblegum","stellarpay"),ninetyFive:(0,y.__)("Ninety Five","stellarpay"),darkBlue:(0,y.__)("Dark Blue","stellarpay")},B=Object.keys(L).reduce(((e,t)=>(e[t]=t,e)),{}),U=(e,t)=>{const r=N[`${e}Theme`]||D;return t?{...r,variables:{...r?.variables,...t}}:r},Y={tabs:{type:"tabs"},accordionSpaced:{type:"accordion",radios:!1,spacedAccordionItems:!0},accordionRadios:{type:"accordion",radios:!0,spacedAccordionItems:!1},accordionSpacedRadios:{type:"accordion",radios:!0,spacedAccordionItems:!0}},H=((0,y.__)("Tabs","stellarpay"),(0,y.__)("Accordion with Spacing","stellarpay"),(0,y.__)("Accordion with Radios","stellarpay"),(0,y.__)("Accordion with Spacing and Radios","stellarpay"),window.wp.components),F=e=>{const{isTestMode:t}=e;if(!t)return null;const r=(0,v.createInterpolateElement)((0,y.__)("You're using test data. Real money won't be charged. <link/> for more information on how to test Stripe.","stellarpay"),{link:(0,g.jsx)(H.ExternalLink,{href:"https://docs.stripe.com/testing",style:{color:"#1d4ed8"},children:(0,y.__)("Click here","stellarpay")})});return(0,g.jsx)("div",{style:{color:"#4b5563",backgroundColor:"white",boxShadow:"0px 0px 5px rgba(0, 0, 0, 0.1)",borderLeft:"4px solid orange",padding:"12px 15px",margin:"10px 0px 30px"},children:(0,g.jsxs)("p",{style:{margin:0,padding:0,lineHeight:"1.4",fontSize:"15px"},children:[(0,g.jsx)("strong",{children:(0,y.__)("Test Mode Active:","stellarpay")})," ",r]})})},Q=e=>{const{amount:t,currency:r,themeConfig:n,layoutConfig:o,stripeConnectionMode:a,stripePromise:i,children:c,paymentElementOnLoadError:s,paymentElementOnReady:u,paymentElementDefaultValues:l,paymentMethodTypes:p}=e,d=t||99999,f="test"===a,m={mode:"payment",amount:d,currency:r,paymentMethodCreation:"manual",appearance:n},h={layout:o,defaultValues:{billingDetails:{...l.billingDetails}}};return(!p||p.length>0)&&(m.paymentMethodTypes=p),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(F,{isTestMode:f},"test-mode"),(0,g.jsxs)(b.Elements,{stripe:i,options:m,children:[(0,g.jsx)(b.PaymentElement,{amount:d,options:h,onReady:e=>{u&&u(e)},onLoadError:e=>{console.log(e),s&&s(e)}}),c]},d)]})},$=`add_payment_method_${e}`,K=e=>{const{order:{amount:r,currency:n},stripeConnectionMode:o,stripeElementTheme:a,stripePaymentElementLayout:i,stripeErrorMessages:c,stripeElementAppearance:s}=stellarPayStripeData,{stripePromise:u,form:l,paymentMethodTypes:p}=e,d=B.custom!==a?U(a):U(s.theme,s),f=Y[i]||{type:"tabs"};return(0,g.jsx)(Q,{stripePromise:u,amount:r,currency:n,themeConfig:d,layoutConfig:f,stripeConnectionMode:o,paymentElementOnLoadError:e=>{T(l,!0);const t=-1!==e.error.message.indexOf("#minimum-and-maximum-charge-amounts");let n=e.error.message;t&&(n=r.toString().length>6?c.amount_too_large:c.amount_too_small),(e=>{const t=e.find(".payment_box.payment_method_stellarpay-stripe");t.hide()})(l),E(l,n)},paymentElementDefaultValues:{billingDetails:O(l)},addPaymentMethodHandler:(0,g.jsx)((({form:e})=>((({form:e})=>{const r=(0,b.useStripe)(),n=(0,b.useElements)();(0,v.useEffect)((()=>{const o=jQuery(`input[name="${t}"]`);return e.on($,(()=>((async e=>{const{stripe:t,elements:r,$form:n}=e,{billing:o}=stellarPayStripeData.customer;if(!t||!r)return E(n,(0,y.__)("An error occurred during the setup of payment options. Please try again. If the issue persists, kindly contact the website administrator for assistance.","stellarpay")),null;const a=await r.submit(),{error:i}=a;if(i)return E(n,i.message),null;try{const e=await t.createPaymentMethod({elements:r,params:{billing_details:{email:o.email,name:o.name,phone:o.phone}}}),{error:a}=e;if(a)return E(n,a.message),null;const{id:i}=e.paymentMethod;return i}catch(e){return E(n,e.message),null}})({stripe:r,elements:n,$form:e}).then((t=>{null!==t&&(o.val(t),e.get(0).submit())})),!1))),()=>{e.off($)}}),[r,n,e])})({form:e}),null)),{form:l}),paymentMethodTypes:p,children:(0,g.jsx)(I,{form:l})})},W=t=>{const{form:r,stripePromise:o,paymentMethodTypes:a=[]}=t;return async function(){w(r)?(r.find(n.PAYMENT_METHOD_ID).val()&&r.find(n.PAYMENT_METHOD_ID).val(""),T(r,!1),await(async()=>{const{ajaxurl:t}=stellarPayStripeData,r={action:"get_cart_totals","payment-method":e};S()&&(r["order-key"]=new URLSearchParams(location.href).get("key"));const n=await fetch((0,C.addQueryArgs)(t,r)),{success:o,data:{totalMinorAmount:a}}=await n.json();!0===o&&(stellarPayStripeData.order.amount=a)})(),(({form:e,stripePromise:t,paymentMethodTypes:r=[]})=>{const n=P(),o=(0,g.jsx)(K,{stripePromise:t,form:e,paymentMethodTypes:r});v.createRoot?(stellarPayStripeData.previousRoot=(0,v.createRoot)(n),stellarPayStripeData.previousRoot.render(o)):(0,v.render)(o,n)})({form:r,stripePromise:o,paymentMethodTypes:a}),S()&&jQuery(document.body).trigger("updated_checkout")):P()}},{stripePublishableKey:q,stripeAccountId:V}=stellarPayStripeData,z=(async({stripePublishableKey:e,stripeAccountId:t})=>e&&t?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];m=!0;var n=Date.now();return h().then((function(e){return function(e,t,r){if(null===e)return null;var n=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"3.4.1",startTime:t})}(n,r),n}(e,t,n)}))}(e,{stripeAccount:t}):null)({stripePublishableKey:q,stripeAccountId:V});document.addEventListener("DOMContentLoaded",(function(){const e=jQuery(n.CHECKOUT_FORM),t=jQuery("form#order_review");var r;[e,t].forEach((function(e){if(!e.length)return;const t=["payment_method_selected"];S()||t.push("updated_checkout"),jQuery(document.body).on(t.join(" "),W({form:e,stripePromise:z})),jQuery(document.body).on("payment_method_selected",k),jQuery(document.body).on("checkout_error",(e=>function(){w(e)&&e.find(n.PAYMENT_METHOD_ID).val()&&e.find(n.PAYMENT_METHOD_ID).val("")})(e))})),t.length&&t.on("submit",(r=t,function(e){if(!w(r))return!0;if(k(),e.preventDefault(),(e=>-1!==e.find(n.PAYMENT_METHOD_ID).val().indexOf("pm_"))(r)||x(r)){const e=new FormData(r.get(0)),t=r.find('input[name="_wp_http_referer"]').val();fetch(t,{method:"POST",body:e}).then((e=>e.json())).then((e=>{const{result:t,reload:n,message:a}=e;if("success"===t)r.trigger(o.CHECKOUT_PLACE_ORDER_SUCCESS,[e,r]);else{if(!0===n)return void window.location.reload();E(r,a)}})).catch((()=>{E(r,(0,y.__)("There was an error processing your order. Please check for any charges in your payment method and review your order history before placing the order again. If issue persists, please contact the site administrator for further assistance.","stellarpay"))}))}else r.trigger(o.CHECKOUT_PLACE_ORDER,[r])}))}))})()})();